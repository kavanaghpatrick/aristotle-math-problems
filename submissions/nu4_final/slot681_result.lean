/-
This file was generated by Aristotle (https://aristotle.harmonic.fun).

Lean version: leanprover/lean4:v4.24.0
Mathlib version: f897ebcf72cd16f89ab4577d0c826cd14afaafc7
This project request had uuid: 4f8d3a7c-2ab9-41e4-9375-567218423228

To cite Aristotle, tag @Aristotle-Harmonic on GitHub PRs/issues, and add as co-author to commits:
Co-authored-by: Aristotle (Harmonic) <aristotle-harmonic@harmonic.fun>
-/

/-
Formalization of the Bunyakovsky conjecture.

We define the Bunyakovsky condition and the Schinzel condition for polynomials in ℤ[X].
The Bunyakovsky conjecture states that if a polynomial f satisfies the Bunyakovsky condition (which implies the Schinzel condition), then f(n) is prime for infinitely many natural numbers n.
This is a famous open problem in number theory.

Definitions:
- `BunyakovskyCondition`: A polynomial f is irreducible, has positive leading coefficient, and the gcd of its values is 1.
- `SchinzelCondition`: For every prime p, there exists an integer n such that p does not divide f(n) for any f in S.
- `BunyakovskyConjectureStatement`: The formal statement of the conjecture.

-/

import Mathlib

set_option linter.mathlibStandardSet false

open scoped BigOperators
open scoped Real
open scoped Nat
open scoped Classical
open scoped Pointwise

set_option maxHeartbeats 0
set_option maxRecDepth 4000
set_option synthInstance.maxHeartbeats 20000
set_option synthInstance.maxSize 128

set_option relaxedAutoImplicit false
set_option autoImplicit false

noncomputable section

/-
Bunyakovsky condition: f is irreducible, has positive leading coefficient, and the gcd of its values is 1.
-/
open Polynomial

def BunyakovskyCondition (f : ℤ[X]) : Prop :=
  Irreducible f ∧ 0 < f.leadingCoeff ∧ ∀ (p : ℕ), p.Prime → ∃ (n : ℤ), ¬(↑p ∣ f.eval n)

/-
Schinzel condition: For every prime p, there exists an integer n such that p does not divide f(n) for any f in S.
-/
open Polynomial

def SchinzelCondition (S : Set ℤ[X]) : Prop :=
  ∀ (p : ℕ), p.Prime → ∃ (n : ℤ), ∀ f ∈ S, ¬(↑p ∣ f.eval n)

/-
If f satisfies the Bunyakovsky condition, then {f} satisfies the Schinzel condition.
-/
open Polynomial

lemma bunyakovsky_implies_schinzel (f : ℤ[X]) :
    BunyakovskyCondition f → SchinzelCondition {f} := by
      unfold BunyakovskyCondition SchinzelCondition; aesop;

/-
The statement of the Bunyakovsky conjecture.
-/
open Polynomial

def BunyakovskyConjectureStatement : Prop :=
  ∀ (f : ℤ[X]), BunyakovskyCondition f ∧ SchinzelCondition {f} →
    Set.Infinite {n : ℕ | (f.eval (n : ℤ)).natAbs.Prime}