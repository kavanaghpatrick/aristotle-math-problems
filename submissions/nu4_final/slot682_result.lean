/-
This file was generated by Aristotle (https://aristotle.harmonic.fun).

Lean version: leanprover/lean4:v4.24.0
Mathlib version: f897ebcf72cd16f89ab4577d0c826cd14afaafc7
This project request had uuid: 1e2691b5-7f25-4985-873e-abf0cfc59948

To cite Aristotle, tag @Aristotle-Harmonic on GitHub PRs/issues, and add as co-author to commits:
Co-authored-by: Aristotle (Harmonic) <aristotle-harmonic@harmonic.fun>
-/

/-
Formalization of Artin's conjecture on primitive roots (part i).

We define the set `S a` of primes `p` for which `a` is a primitive root modulo `p`.
We also define `Set.HasDensity` to represent the concept of natural density.
The conjecture states that if `a` is not a perfect square and `a ≠ -1`, then `S a` has positive density in the set of primes.

Note: The theorem `artin_primitive_roots.parts.i` is an open conjecture (Artin's Conjecture).
We have formalized the statement as `ArtinConjectureStatement` and the constituent definitions.
The theorem itself cannot be added to the context as a proved theorem because it is an open problem and the ATP times out when attempting to prove it (as expected).
-/

import Mathlib

set_option linter.mathlibStandardSet false

open scoped BigOperators
open scoped Real
open scoped Nat
open scoped Classical
open scoped Pointwise

set_option maxHeartbeats 0
set_option maxRecDepth 4000
set_option synthInstance.maxHeartbeats 20000
set_option synthInstance.maxSize 128

set_option relaxedAutoImplicit false
set_option autoImplicit false

noncomputable section

#check IsSquare (3 : ℤ)
#check IsPrimitiveRoot

open Classical

def S (a : ℤ) : Set ℕ := {p | p.Prime ∧ IsPrimitiveRoot (a : ZMod p) (p - 1)}

def Set.HasDensity (A : Set ℕ) (d : ℝ) (B : Set ℕ) : Prop :=
  Filter.Tendsto (fun n => (Nat.count (fun k => k ∈ A ∩ B) n : ℝ) / (Nat.count (fun k => k ∈ B) n)) Filter.atTop (nhds d)

/-
The statement of Artin's conjecture for a specific integer a.
-/
def ArtinConjectureStatement (a : ℤ) : Prop :=
  ¬IsSquare a → a ≠ -1 → ∃ x > 0, (S a).HasDensity x {p | p.Prime}