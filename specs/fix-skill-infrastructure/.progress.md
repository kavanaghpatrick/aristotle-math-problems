# Progress: fix-skill-infrastructure

## Original Goal
Fix math-forge skill infrastructure: (1) Update submit.md to delegate to safe_aristotle_submit.py instead of inline Python with template placeholders, (2) Update SessionStart hook (context-loader.sh) to remind about available /project:* skills.

## Intent Classification
- Type: REFACTOR
- Confidence: high (3 keywords matched)
- Min questions: 3
- Max questions: 5
- Keywords matched: update, fix, improve

## Reality Check (BEFORE)

**Goal type**: Fix
**Issue 1**: submit.md Step 5 (lines 71-86) has inline Python with `$CONTEXT_FILES` and `$FILE_PATH` -- these are not real Claude Code template variables and would produce broken Python at runtime. The existing `scripts/safe_aristotle_submit.py` already handles everything this inline code attempts.
**Issue 2**: context-loader.sh briefing (line 101) mentions `mk search` and `mk find` but never mentions `/project:*` skills, causing Claude to call scripts directly instead of using skills.

**Key errors to resolve**:
- Error 1: submit.md Step 5 broken template placeholders `$CONTEXT_FILES`, `$FILE_PATH`
- Error 2: submit.md Step 4 has redundant inline Python queue check (script does this)
- Error 3: context-loader.sh missing skill reminder for 11 available `/project:*` commands

## Learnings
- fetch.md follows delegation pattern: calls `python3 scripts/aristotle_fetch.py $ARGUMENTS` -- submit.md should follow same pattern
- safe_aristotle_submit.py CLI supports `--informal`, `--context <file>`, `--batch`, `--force` flags
- safe_aristotle_submit.py already runs gap-targeting gate, auto-context, dedup, lockfile, retry internally
- context-loader.sh builds BRIEFING string incrementally, appends sections conditionally -- skill block follows same pattern
- 11 command files exist in `.claude/commands/`: submit, fetch, status, sketch, sweep, screen, screen-batch, audit, process-result, optimize, debate
