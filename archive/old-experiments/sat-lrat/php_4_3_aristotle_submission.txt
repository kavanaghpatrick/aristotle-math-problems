# PHP-4-3 LRAT Verification Problem

## Problem Statement

Prove that the Pigeonhole Principle formula PHP-4-3 (4 pigeons, 3 holes) is UNSATISFIABLE using the provided LRAT proof certificate.

**Goal**: Create a Lean 4 theorem stating that PHP-4-3 has no satisfying assignment.

## Background

The Pigeonhole Principle states that you cannot place n+1 pigeons into n holes without placing at least two pigeons in the same hole. PHP-4-3 encodes this as a SAT problem with:
- 12 Boolean variables: v_{i,j} = "pigeon i in hole j" where i ∈ {1,2,3,4}, j ∈ {1,2,3}
- 34 CNF clauses (at-least-one + at-most-one constraints)

This formula is UNSATISFIABLE by the pigeonhole principle.

## Available Resources

You have access to:
1. **DIMACS CNF formula** (inline below)
2. **LRAT proof certificate** (generated by CaDiCaL SAT solver)
3. **Lean 4.12.0+ infrastructure**:
   - `Std.Tactic.BVDecide` with built-in LRAT checking
   - `bv_decide` tactic
   - Mathlib's `Mathlib/Tactic/Sat/FromLRAT.lean` (688 lines by Mario Carneiro)
   - `lrat_proof` macro for importing DIMACS+LRAT

## DIMACS CNF Formula (34 clauses, 12 variables)

```
p cnf 12 34
1 2 3 0
4 5 6 0
7 8 9 0
10 11 12 0
-1 -4 0
-1 -7 0
-1 -10 0
-4 -7 0
-4 -10 0
-7 -10 0
-2 -5 0
-2 -8 0
-2 -11 0
-5 -8 0
-5 -11 0
-8 -11 0
-3 -6 0
-3 -9 0
-3 -12 0
-6 -9 0
-6 -12 0
-9 -12 0
-1 -2 0
-1 -3 0
-2 -3 0
-4 -5 0
-4 -6 0
-5 -6 0
-7 -8 0
-7 -9 0
-8 -9 0
-10 -11 0
-10 -12 0
-11 -12 0
```

## LRAT Proof Certificate

The LRAT proof is stored in `/Users/patrickkavanagh/math/php-4-3.lrat.bin` (655 bytes, binary format).

This proof has been verified correct by CaDiCaL v2.2.0 with `--checkproof=2`.

**Proof structure**:
- 128 total steps
- 50 clause additions (with resolution hints)
- 78 clause deletions
- Derives empty clause (contradiction)

## Task

Create a Lean 4 file that:

1. **Imports the necessary libraries** (Mathlib, Std.Tactic.BVDecide, etc.)

2. **Defines the PHP-4-3 formula** as a computable SAT instance

3. **Proves unsatisfiability** using one of these approaches:
   - **Option A**: Use `lrat_proof` macro to import DIMACS CNF + LRAT proof directly
   - **Option B**: Use `bv_decide` tactic (if it can handle this problem)
   - **Option C**: Manually define the formula and use the LRAT checker

4. **Final theorem** should be of the form:
   ```lean
   theorem php_4_3_unsat : ∀ (assignment : Fin 12 → Bool), ¬satisfies_formula assignment php_4_3_cnf
   ```
   Or equivalent formulation.

## Implementation Notes

- The LRAT proof certificate is in **binary format** (not text). You may need to:
  - Convert it to text format, OR
  - Use Lean's binary LRAT parser (if available)

- Lean 4.12.0+ has CaDiCaL built-in with verified LRAT checking

- Mario Carneiro's `FromLRAT.lean` in Mathlib provides the `lrat_proof` command

- Reference the files at:
  - `/Users/patrickkavanagh/math/php-4-3.cnf`
  - `/Users/patrickkavanagh/math/php-4-3.lrat.bin`

## Success Criteria

- ✅ File compiles without errors in Lean 4
- ✅ Proves PHP-4-3 is unsatisfiable (zero sorries)
- ✅ Uses the LRAT proof certificate (don't re-prove from scratch)
- ✅ Clean, readable code
- ✅ Total file < 200 lines (certificate-based verification should be concise)

## Expected Approach

The most elegant solution would be to use Mathlib's `lrat_proof` macro:

```lean
import Mathlib.Tactic.Sat.FromLRAT

lrat_proof php_4_3_unsat
  "p cnf 12 34\n1 2 3 0\n..."  -- Full CNF
  "<lrat proof string>"         -- LRAT proof in text format
```

But choose whichever approach works best with Lean 4's current infrastructure.

---

**Please create a Lean 4 file that formally verifies PHP-4-3 unsatisfiability using the provided LRAT certificate.**
