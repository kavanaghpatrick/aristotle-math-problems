# Aristotle by Harmonic - Complete Guide

## Overview

**Aristotle** is a mathematical superintelligence AI system by Harmonic that combines formal verification with informal reasoning. It achieved gold-medal performance on the 2025 IMO (5 out of 6 problems solved) and 96.8% on the VERINA benchmark for code verification.

**Key Innovation**: Unlike standard LLMs that can hallucinate, Aristotle produces *formally verified* Lean 4 proofs that are mathematically guaranteed to be correct.

---

## Installation & Setup

```bash
# Install/upgrade the library
pip install --upgrade aristotlelib

# Set your API key (add to ~/.zshrc for persistence)
export ARISTOTLE_API_KEY="your-key-here"

# Launch the TUI
aristotle
```

**Current Version**: aristotlelib 0.6.0
**Lean Version**: v4.24.0
**Mathlib Version**: v4.24.0

---

## Four Operating Modes

### Mode 1: Fill Sorries (Formal Lean)
Complete `sorry` placeholders in existing Lean files.

```bash
aristotle prove-from-file your_proof.lean
```

**Use case**: You have a Lean file with partial proofs and want Aristotle to fill in the gaps.

### Mode 2: Autoformalize from Paper (Informal → Formal)
Convert LaTeX, Markdown, or text files into formal Lean proofs.

```bash
aristotle prove-from-file --informal paper.tex
aristotle prove-from-file --informal problem.md
```

**Use case**: You have mathematical content written informally and want it formalized.

### Mode 3: English Mode (Natural Language)
Describe problems in plain English and get formal proofs.

```bash
# Create a problem file
echo "Prove that the square root of 2 is irrational" > problem.txt

# Submit to Aristotle
aristotle prove-from-file --informal problem.txt
```

**Use case**: You want to solve a math problem without writing any Lean code.

### Mode 4: View History
Access previous projects and download completed proofs.

```bash
# Via TUI: select option 4
aristotle
```

---

## English Mode Deep Dive

### What It Can Solve

| Category | Example Problems |
|----------|------------------|
| **Number Theory** | Prove √2 is irrational, Fermat's Little Theorem |
| **Algebra** | Prove commutativity, associativity, group properties |
| **Analysis** | Limits, continuity, derivatives, integrals |
| **Geometry** | Euclidean proofs, triangle theorems |
| **Logic** | Propositional and predicate logic proofs |
| **Combinatorics** | Counting arguments, pigeonhole principle |

### Input Formats Accepted

1. **Plain English**: "Prove that n + 0 = n for all natural numbers n"
2. **LaTeX**: `Prove that $\sqrt{2}$ is irrational`
3. **Markdown**: Standard markdown with math notation
4. **Mixed**: Combine prose with formal notation

### Output Format

Aristotle returns a complete `.lean` file containing:
- Header with version info and project UUID
- Imports (typically Mathlib)
- Configuration options
- The formal proof or reference to existing Mathlib theorem

**Example Output** (for "Prove n + 0 = n"):
```lean
/-
This file was generated by Aristotle.

Lean version: leanprover/lean4:v4.24.0
Mathlib version: f897ebcf72cd16f89ab4577d0c826cd14afaafc7
This project request had uuid: 427d5054-f413-4d9a-bd0b-d9023b891164
-/

/-
The theorem that for all natural numbers n, n + 0 = n is already proven
in Mathlib as `Nat.add_zero`.
-/

import Mathlib

#check Nat.add_zero
```

**Key Insight**: Aristotle is smart enough to recognize when a theorem already exists in Mathlib and reference it rather than re-proving it.

---

## CLI Reference

### Basic Usage
```bash
aristotle prove-from-file <input_file> [options]
```

### Key Options

| Option | Description |
|--------|-------------|
| `--informal` | Use English/LaTeX mode (not Lean) |
| `--output-file <path>` | Where to save solution (default: `<input>_aristotle.lean`) |
| `--context-files <files>` | Additional context files |
| `--context-folder <path>` | Folder of context files |
| `--formal-input-context <file>` | Lean context file (informal mode) |
| `--no-wait` | Don't wait for completion (returns project ID) |
| `--no-auto-add-imports` | Disable automatic import resolution |
| `--polling-interval <sec>` | Status check interval (default: 30) |

### Examples

```bash
# Simple English mode
aristotle prove-from-file --informal problem.txt

# With Lean context for definitions
aristotle prove-from-file --informal problem.md --formal-input-context defs.lean

# With additional context files
aristotle prove-from-file --informal problem.txt --context-files notes.md background.tex

# Async submission (get project ID immediately)
aristotle prove-from-file --informal problem.txt --no-wait

# Custom output location
aristotle prove-from-file --informal problem.txt --output-file ~/proofs/solution.lean
```

---

## Python API

### Quick Start

```python
import asyncio
from aristotlelib import Project, ProjectInputType, set_api_key

async def prove_theorem():
    set_api_key("your-api-key")

    # English mode proof
    solution = await Project.prove_from_file(
        input_file_path="problem.txt",
        project_input_type=ProjectInputType.INFORMAL,
        wait_for_completion=True
    )
    print(f"Solution saved to: {solution}")

asyncio.run(prove_theorem())
```

### Advanced: Step-by-Step Control

```python
import asyncio
from pathlib import Path
from aristotlelib import Project, ProjectInputType, set_api_key

async def advanced_prove():
    set_api_key("your-api-key")

    # Create project
    project = await Project.create(
        project_input_type=ProjectInputType.INFORMAL
    )
    print(f"Project ID: {project.project_id}")

    # Add context files
    await project.add_context(
        context_file_paths=["definitions.lean", "background.md"],
        validate_lean_project_root=False
    )

    # Submit problem (as text, not file)
    await project.solve(
        input_content="Prove that for all real numbers x, x^2 >= 0"
    )

    # Wait and download
    solution_path = await project.wait_for_completion("output.lean")
    print(f"Done! Solution at: {solution_path}")

asyncio.run(advanced_prove())
```

### List Past Projects

```python
async def list_history():
    projects, next_key = await Project.list_projects(limit=10)
    for p in projects:
        print(f"{p.project_id}: {p.status} ({p.file_name})")
```

---

## TUI Navigation

### Launching
```bash
aristotle
```

### Main Menu
```
[1] Fill sorries in a lean file
[2] Prove and formalize from existing files (.tex, .md, .txt)
[3] Direct Aristotle in English
[4] View history
```

### Controls
- **Number keys**: Select menu option
- **Tab**: File path completion
- **Ctrl+S**: Submit (in multi-line input)
- **Enter**: Submit (in single-line input)
- **Escape**: Detach from monitoring (returns to menu)
- **Ctrl+C**: Exit

### Requirements
- Terminal: minimum 80x24, recommended 100x24+
- ANSI color support

---

## Architecture & How It Works

### Three Components

1. **Lean Proof Search** (200B+ parameters)
   - Monte Carlo Graph Search for proof exploration
   - Trained on formal mathematics corpus

2. **Lemma-based Reasoning** (English Mode)
   - Generates informal proof sketches
   - Breaks into lemmas
   - Formalizes each part
   - Iterates based on Lean compiler feedback

3. **Yuclid Geometry Solver**
   - Specialized C++ solver
   - 500x faster than AlphaGeometry

### Processing Flow

```
English Problem → Informal Proof → Lemma Decomposition → Formal Lean → Compiler Check → Iterate/Done
```

---

## Constraints & Limits

| Resource | Limit |
|----------|-------|
| Max files per request | 10 |
| Max file size | 100 MB |
| Concurrent projects | 5 |
| Polling default | 30 seconds |
| Max polling failure window | 10 minutes |

### Supported File Extensions
- **Formal**: `.lean`
- **Informal**: `.md`, `.txt`, `.tex`

---

## Example Problems to Try

### Basic
```
Prove that n + 0 = n for all natural numbers n
```

### Intermediate
```
Prove that if n is even, then n² is even
```

### Advanced
```
Prove the irrationality of √2
```

### Logic
```
Prove that P ∧ Q → Q ∧ P (commutativity of conjunction)
```

### Analysis
```
Prove that for all real numbers x, x² ≥ 0
```

---

## Notable Achievements

- **IMO 2025**: 5/6 problems (gold medal level)
- **VERINA Benchmark**: 96.8% (code verification)
- **Erdős Problem #124**: Solved in 6 hours (open since 1990s)
- **Found errors**: In Terence Tao's Analysis textbook

---

## Resources

- **Web Interface**: https://aristotle.harmonic.fun
- **PyPI**: https://pypi.org/project/aristotlelib/
- **Mobile Apps**: iOS and Android available
- **Documentation**: https://harmonic.fun/news

---

## Troubleshooting

### "You currently already have 5 projects in progress"
Wait for existing projects to complete, or check history to see status.

### API key not working
```bash
# Verify it's set
echo $ARISTOTLE_API_KEY

# Or pass directly
aristotle --api-key "your-key" prove-from-file ...
```

### Terminal too small
Resize to at least 80 columns × 24 rows for TUI.

### Connection issues
The library has built-in retry with exponential backoff (15s → 30s → 60s → 120s max).
